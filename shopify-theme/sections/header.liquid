{% comment %}
  Header Section with Navigation
  Accessible and responsive navigation
{% endcomment %}

<header class="sticky top-0 z-50 bg-white/95 backdrop-blur-md border-b border-gray-200 shadow-sm" role="banner">
  <nav class="container mx-auto px-4 sm:px-6 lg:px-8 py-4" role="navigation" aria-label="Main Navigation">
    <div class="flex items-center justify-between">
      <div class="flex items-center space-x-2">
        {% if section.settings.logo %}
          <a href="/" class="flex items-center" aria-label="Home">
            <img
              src="{{ section.settings.logo | img_url: '100x100' }}"
              alt="{{ shop.name }}"
              width="40"
              height="40"
              loading="eager"
            >
          </a>
        {% else %}
          <a href="/" class="flex items-center space-x-2" aria-label="Home">
            <div class="w-8 h-8 bg-gradient-to-br from-blue-600 to-teal-500 rounded-lg flex items-center justify-center">
              <span class="text-white font-bold text-sm">P</span>
            </div>
            <span class="text-xl font-bold text-gray-900">{{ shop.name }}</span>
          </a>
        {% endif %}
      </div>

      <div class="hidden md:flex items-center space-x-8">
        {% for link in linklists[section.settings.menu].links %}
          <a
            href="{{ link.url }}"
            class="nav-link text-gray-700 hover:text-blue-600 font-medium transition-colors relative"
            {% if link.current %}aria-current="page"{% endif %}
          >
            {{ link.title }}
          </a>
        {% endfor %}
      </div>

      <div class="flex items-center space-x-4">
        <a
          href="/search"
          class="p-2 text-gray-700 hover:text-blue-600 transition-colors"
          aria-label="Search"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
        </a>

        <a
          href="/account"
          class="p-2 text-gray-700 hover:text-blue-600 transition-colors"
          aria-label="Account"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
          </svg>
        </a>

        <a
          href="/cart"
          class="p-2 text-gray-700 hover:text-blue-600 transition-colors relative"
          aria-label="Cart"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
          </svg>
          <span class="absolute -top-1 -right-1 bg-blue-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center" id="cart-count">
            {{ cart.item_count }}
          </span>
        </a>

        <button
          type="button"
          class="md:hidden p-2 text-gray-700 hover:text-blue-600"
          aria-label="Open mobile menu"
          id="mobile-menu-button"
        >
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </button>
      </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden mt-4 pb-4">
      <div class="flex flex-col space-y-4">
        {% for link in linklists[section.settings.menu].links %}
          <a
            href="{{ link.url }}"
            class="text-gray-700 hover:text-blue-600 font-medium transition-colors"
            {% if link.current %}aria-current="page"{% endif %}
          >
            {{ link.title }}
          </a>
        {% endfor %}
      </div>
    </div>
  </nav>
</header>

<style>
  .nav-link::after {
    content: '';
    position: absolute;
    bottom: -4px;
    left: 0;
    width: 0;
    height: 2px;
    background: #0891b2;
    transition: width 0.3s ease;
  }

  .nav-link:hover::after,
  .nav-link[aria-current="page"]::after {
    width: 100%;
  }
</style>

<script>
  document.getElementById('mobile-menu-button')?.addEventListener('click', function() {
    const menu = document.getElementById('mobile-menu');
    menu.classList.toggle('hidden');
  });
</script>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    }
  ]
}
{% endschema %}
